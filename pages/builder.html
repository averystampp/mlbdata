<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Builder</title>
</head>
<body>
    <h1>Players</h1>

    <input id="p-search" type="text">

    <form action="">

    </form>

    <div id="player-holder">

    </div>

</body>
</html>


<script>

    let playerHolder = document.getElementById("player-holder")

    document.getElementById("p-search").addEventListener("input", function (){
        Array.prototype.slice.call(document.getElementsByTagName('li')).forEach(
        function(item) {
            item.remove();
            // or item.parentNode.removeChild(item); for older browsers (Edge-)
        });
        fetch(`/player/search/name?name=${this.value}`)
        .then((response) => {
            return response.json();
        })
        .then((data) => {
            let players = data;
            players.map(function(player) {
                let li = document.createElement('li');
                li.setAttribute("id", "player")
                let link = document.createElement('a')
                link.setAttribute("href", `/player/stats/${player.ID}`)
                link.innerHTML = `${player.Name} ${player.ID}`
                li.appendChild(link)
                playerHolder.appendChild(li)
            });
        })
    })
</script>